<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <link rel="stylesheet" th:href="@{/css/vendor/font-awesome.min.css}"/>
  <link rel="stylesheet" th:href="@{/css/vendor/Pe-icon-7-stroke.css}" />

  <!-- Plugin CSS (Global Plugins Files) -->
  <link rel="stylesheet" th:href="@{/css/plugins/animate.min.css}">
  <link rel="stylesheet" th:href="@{/css/plugins/jquery-ui.min.css}">
  <link rel="stylesheet" th:href="@{/css/plugins/swiper-bundle.min.css}">
  <link rel="stylesheet" th:href="@{/css/plugins/nice-select.css}">
  <link rel="stylesheet" th:href="@{/css/plugins/magnific-popup.min.css}"/>

  <!-- Style CSS -->
  <link rel="stylesheet" th:href="@{/css/style.css }">
  <link rel="stylesheet" th:href="@{/css/project.css }">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
<div class="title">공지사항</div>
<!-- Begin 게시판영역 -->
<table class="basic-table" id="project-qna-table" align="center">
  <tr>
    <th>번호</th>
    <th>제목</th>
    <th>작성일</th>
    <th>조회수</th>
  </tr>
  <tr th:each="project : ${ projectNoticeList }" class="noticeList" id="noticeList">
    <td th:text="${ project.projectNoticeNo }"></td>
    <td th:text="${ project.projectNoticeTitle }"></td>
    <td th:text="${ project.registDate }"></td><!--이름을 넣어야하는데..어떻게 들고오나....수바-->
    <td th:text="${ project.projectNoticeCount }"></td>
  </tr>
</table>
<!--<td th:te></td>-->
<div id="pagination" class="pagenumbers" align="center">
  <!-- 맨 앞으로 이동 -->
  <button th:onclick="'location.href=\'/project/notice/list/'+ @{${projectNo}} +'?page=' + @{${paging.startPage}} + '\''"
          th:disabled="${ projectNoticeList.first }" class="paging-btn first"><<</button>

  <!-- 이전 페이지로 이동 -->
  <button th:onclick="'location.href=\'/project/notice/list/'+ @{${projectNo}} +'?page=' + @{${paging.currentPage - 1}} + '\''"
          th:disabled="${ projectNoticeList.first }" class="paging-btn prev"><</button>

  <!-- 숫자 버튼-->
  <th:block th:each="page : ${#numbers.sequence(paging.startPage, paging.endPage)}">
    <button th:onclick="'location.href=\'/project/notice/list/'+ @{${projectNo}} +'?page=' + @{${page}} + '\''"
            th:text="${ page }" th:disabled="${ paging.currentPage eq page}" class="paging-btn"></button>
  </th:block>

  <!-- 다음 페이지로 이동 -->
  <button th:onclick="'location.href=\'/project/notice/list/'+ @{${projectNo}} +'?page=' + @{${paging.currentPage + 1}} + '\''"
          th:disabled="${ projectNoticeList.last}" class="paging-btn next">></button>

  <!-- 맨 마지막으로 이동-->
  <button th:onclick="'location.href=\'/project/notice/list/'+ @{${projectNo}} +'?page=' + @{${paging.endPage}} + '\''"
          th:disabled="${ projectNoticeList.last }" class="paging-btn last">>></button>
</div>
</div>
<script>

  /* 공지사항 목록 조회회 */    // $("#notice").click(function() {
  console.log("도착?");
  const projectNo = 2;

  function projectNoticeData(projectNoticeNo, projectNoticeTitle, projectNoticeCount, registDate) {

    return {projectNoticeNo, projectNoticeTitle, projectNoticeCount, registDate};
  }

  function findProjectNoticeList() {

    fetch('/project/notice/list/{projectNo}').then(resonse => {
      if (resonse.ok) {
        return resonse.json();
      }
    }).then(json => {
      let html = '';

      if (!json.length) {
        alert("암것도 없음");
        console.log("암것도 없음");
        html = '<td colspan="5">등록된 게시글이 없습니다.</td>';
      } else {
        json.forEach((projectNoticeData, idx) => {
          console.log("게시글있음");
          //
          // });



        });
      }

  //     /* 페이징 */
  // const projectNotice = document.getElementById('noticeList');
  // const paging = document.getElementById('pagination');
  // console.log(projectNotice);
  // console.log("왜 안나와");
  // let currentPage = 1;
  // let rows = 10;
  //
  // function ProjectNoticeList (items, wrapper, rows_per_page, page) {
  //     wrapper.innerHTML = "";
  //     page--;
  //
  //     let start = rows_per_page * page;
  //     let end = loop_start + rows_per_page;
  //     let paginatedList = items.slice(start, end);
  //
  //     json.forEach((projectNoticeData, idx) => {
  //         console.log("게시글있음");
  //
  //     });
  // }
  //
  // function SetupPagination (items, wrapper, rows_per_page) {
  //     wrapper.innerHTML = "";
  //
  //     let page_count = Math.ceil(items.length / rows_per_page);
  //     for(let i =1; l< page_count + 1; i++) {
  //         let btn = PaginationButton(i);
  //         wrapper.appendChild(btn);
  //     }
  // }
  //
  // function PaginationButton (page, items) {
  //     let button = document.createElement('button');
  //     button.innerText = page;
  //     console.log("무가뜨긴하나")
  //     if(currentPage == page) {
  //         button.classList.add('active');
  //     }
  //
  //     return button;
  // }
  //
  // ProjectNoticeList(projectNoticeData, projectNotice, rows, currentPage);
  // SetupPagination(projectNoticeData, paging, rows);

</script>
<script th:src="@{ /js/vendor/bootstrap.bundle.min.js }"></script>
<script th:src="@{ /js/vendor/jquery-3.5.1.min.js }"></script>
<script th:src="@{ /js/vendor/jquery-migrate-3.3.0.min.js }"></script>
<script th:src="@{ /js/vendor/modernizr-3.11.2.min.js }"></script>
<script th:src="@{ /js/vendor/jquery.waypoints.js }"></script>

<!--Plugins JS-->
<script th:src="@{ /js/plugins/wow.min.js }"></script>
<script th:src="@{ /js/plugins/jquery-ui.min.js }"></script>
<script th:src="@{ /js/plugins/swiper-bundle.min.js }"></script>
<script th:src="@{ /js/plugins/jquery.nice-select.js }"></script>
<script th:src="@{ /js/plugins/parallax.min.js }"></script>
<script th:src="@{ /js/plugins/jquery.magnific-popup.min.js }"></script>
</body>
</html>